import{A as E,M as V,B as j,C as q,r as u,D as A,$ as v,G as x,i as d,k as b,v as F,u as o,o as y,c as H,d as n,w as a,b as l,e as w,g as I,t as R,f as C,_ as J,m as K,L as O,N as Q}from"./glc-entry-c39e8b6b.js";/* empty css                  *//* empty css                  */const U={class:"header"},W={style:{display:"flex","justify-content":"space-between"}},X=l("span",null,"刷新",-1),Y={style:{display:"flex","justify-content":"space-between"}},Z=["textContent"],le={__name:"StoragesMain",setup(ee){const T=E(),p=V(T.activePath),_=j(),k={emitter:p,withoutSearchForm:!0},{visible:S,tableData:c,tableHeight:G,pageSettingStore:M,showTableLoadding:s}=q(k),$=u(),g=u("storagesMain"),m=u("");A(()=>{f()});function f(){s.value=!0,v("/v1/store/list",{},null,{"Content-Type":"application/x-www-form-urlencoded"}).then(e=>{if(e.success){const t=e.result.data||[];c.value.splice(0,c.value.length,...t),m.value=e.result.info,document.querySelector(".c-glc-table .el-scrollbar__wrap").scrollTop=0}else e.code==403&&(x(),_.push("/login"))}).finally(()=>{s.value=!1})}function B(i){v("/v1/store/delete",{storeName:i.name},null,{"Content-Type":"application/x-www-form-urlencoded"}).then(t=>{t.success?C.info(`已删除日志仓 ${i.name}`):t.code==403?(x(),_.push("/login")):C.error(t.message)}).finally(()=>{s.value=!1})}return(i,e)=>{const t=J,r=K,D=O,N=d("GxPageTableConfig"),L=d("GxToolbar"),P=d("GxTable"),z=Q;return b((y(),H("div",null,[n(L,{style:{"margin-bottom":"13px"},class:"c-btn"},{left:a(()=>[l("div",U,[l("div",W,[l("div",null,[w(" 日志仓信息列表 "),n(r,{type:"primary",style:{height:"30px",color:"white","background-color":"#0081dd"},onClick:f},{default:a(()=>[n(t,{name:"refresh-right",style:{margin:"0 5px 0 0"}}),X]),_:1})])])])]),right:a(()=>[n(D,{content:"缩放",placement:"top"},{default:a(()=>[n(r,{circle:"",onClick:e[0]||(e[0]=h=>o(p).emit("main:switchMaximizePage"))},{default:a(()=>[n(t,{name:"zoom"})]),_:1})]),_:1}),n(N,{tid:o(g),"page-config":o(M)},null,8,["tid","page-config"])]),_:1}),b((y(),I(P,{ref_key:"table",ref:$,stripe:"","enable-header-contextmenu":!1,tid:o(g),data:o(c),height:o(G),class:"c-gx-table c-glc-table","row-key":"id"},{$operation:a(({row:h})=>[n(r,{size:"small",type:"warning",onClick:te=>B(h)},{default:a(()=>[w("删除")]),_:2},1032,["onClick"])]),_:1},8,["tid","data","height"])),[[z,o(s)]]),l("div",null,[l("div",Y,[l("div",{style:{"min-height":"30px","padding-top":"5px","line-height":"30px",color:"#909399"},textContent:R(o(m))},null,8,Z)])])],512)),[[F,o(S)]])}}};export{le as default};
